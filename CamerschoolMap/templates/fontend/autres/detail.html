<!DOCTYPE html>
{% load static %}
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Détails de l'établissement scolaire - CamerschoolMap</title>
  <!-- Bootstrap, Font Awesome, Leaflet et Animate.css -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <style>
    body {
      background: #f8f9fa;
      font-family: 'popping', sans-serif;
    }
    /* Hero Section */
    .hero {
      background: url("{% static 'fontend/images/logo.jpg' %}") no-repeat center ;
      background-size: cover;
      padding: 100px 0;
      color: rgb(43, 26, 0);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
      
    }
    .hero h1 {
      font-size: 3rem;
      font-weight: 1000;
    }
    /* Detail Card */
    .detail-card {
      border: none;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      background: white;
      margin-bottom: 30px;
    }
    .detail-card .card-header {
      background: linear-gradient(to left, rgb(2, 46, 0), rgb(0, 155, 13));
      color: white;
      padding: 20px;
      text-align: center;
    }
    .detail-card .card-body {
      padding: 30px;
    }
    .detail-card .card-img-top {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
      transition: transform 0.4s;
    }
    .detail-card .card-img-top:hover {
      transform: scale(1.05);
    }
    .info-list li {
      font-size: 1.1rem;
      margin-bottom: 10px;
    }
    /* Carousel */
    .carousel-item img {
      width: 100%;
      height: 400px;
      object-fit: cover;
    }
    /* Map */
    .map-container {
      height: 400px;
      border-radius: 15px;
    }
    /* Footer */
    footer {
      background: #007a3d;
      color: white;
      padding: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <!-- Hero Section -->
  <section class="hero text-center">
    <div class="container">
      <h1>{{ etablissement.nom }}</h1>
      <p class="lead">Découvrez tous les détails de cet établissement scolaire</p>
    </div>
  </section>

  <!-- Main Content -->
  <div class="container my-5">
    <!-- Photo Carousel -->
    <div id="photoCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
      <div class="carousel-inner">
        {% if etablissement.image_profil %}
        <div class="carousel-item active">
          <img src="{% static 'fontend/images/camer3.jpg' %}" alt="Image de profil">
        </div>
        {% endif %}
        {% for photo in etablissement.photoetablissement_set.all %}
        <div class="carousel-item {% if forloop.first and not etablissement.image_profil %}active{% endif %}">
          <img src="{{ photo.image.url }}" alt="Photo de l'établissement">
        </div>
        {% endfor %}
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#photoCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon bg-black" aria-hidden="true"></span>
        <span class="visually-hidden">Précédent</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#photoCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon bg-black" aria-hidden="true"></span>
        <span class="visually-hidden">Suivant</span>
      </button>
    </div>

    <!-- Establishment Detail Card -->
    <div class="card detail-card">
      <div class="card-header">
        <h2>Détails de l'établissement</h2>
      </div>
      <div class="card-body">
        <h3 class="mb-3">{{ etablissement.nom }}</h3>
        <p><i class="fas fa-school me-2"></i> <strong>Type :</strong> {{ etablissement.type }}</p>
        <p><i class="fas fa-university me-2"></i> <strong>Catégorie :</strong> {{ etablissement.categorie }}</p>
        <p><i class="fas fa-info-circle me-2"></i> <strong>Description :</strong></p>
        <p>{{ etablissement.description }}</p>
        <hr>
        <ul class="list-unstyled info-list">
          <li><i class="fas fa-map-marker-alt me-2"></i> <strong>Adresse :</strong> {{ etablissement.adresse }}</li>
          <li><i class="fas fa-envelope me-2"></i> <strong>Email :</strong> <a href="mailto:{{ etablissement.email }}">{{ etablissement.email }}</a></li>
          <li><i class="fas fa-phone me-2"></i> <strong>Téléphone :</strong> {{ etablissement.contact }}</li>
        </ul>
      </div>
    </div>

    <!-- Interactive Map Section -->
    <div class="card detail-card mt-5">
      <div class="card-header">
        <h3>Localisation</h3>
      </div>
      <div class="card-body">
        <div id="map" class="map-container"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2024 CamerschoolMap - Tous droits réservés</p>
  </footer>

  <!-- Scripts JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script>
    // Initialisation de la carte interactive avec Leaflet.js
    var map = L.map('map').setView([5.9631, 10.1591], 13); // Coordonnées pour Bafoussam
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    // Marqueur pour l'établissement
    L.marker([5.9631, 10.1591]).addTo(map)
      .bindPopup('{{ etablissement.nom }}')
      .openPopup();
  </script>
</body>
</html>
